# MMSDecrtpy
# Signal/Session μ²¨λ¶€νμΌ(.mms) λ³µνΈν™” μλ™ν™” λ„κµ¬

μ΄ μ €μ¥μ†λ” Signal, Session λ“± λ³΄μ• λ©”μ‹ μ €μ μ•”νΈν™”λ μ²¨λ¶€νμΌ(.mms)μ„  
μλ™μΌλ΅ λ³µνΈν™”ν•λ” νμ΄μ¬ μ¤ν¬λ¦½νΈλ¥Ό μ κ³µν•©λ‹λ‹¤.

---

## π” κ°μ”

- **μ§€μ› ν™κ²½:** Android Signal/Session μ•±μ—μ„ μ¶”μ¶ν• μ•”νΈν™” μ²¨λ¶€νμΌ(.mms)
- **κΈ°λ¥:**  
  - modernKeyμ™€ κ° νμΌλ³„ data_random κ°’μ„ ν™μ©ν•μ—¬  
    AES-CTR μ•”νΈν™”λ μ²¨λ¶€νμΌμ„ μλ™ λ³µνΈν™”
- **μ£Όμ” ν™μ©:**  
  - λ””μ§€ν„Έ ν¬λ μ‹, λ³΄μ• μ—°κµ¬, λ°μ΄ν„° λ³µκµ¬, λ²•μ  λ¶„μ„, κµμ΅

---

## π”‘ λ³µνΈν™” μ›λ¦¬

1. **modernKey μ¶”μ¶:**  
   - μ„¤μ • νμΌ(`org.thoughtcrime.securesms_preferences.xml`) λ“±μ—μ„ Base64λ΅ μ¶”μ¶  
   - λ¨λ“  μ²¨λ¶€νμΌμ— λ™μΌν•κ² μ μ©
2. **κ° μ²¨λ¶€νμΌλ³„ data_random κ°’ ν™•λ³΄:**  
   - μ•± λ°μ΄ν„°λ² μ΄μ¤(DB)μ—μ„ HEX(16μ§„μ) λ¬Έμμ—΄λ΅ μ¶”μ¶
3. **νμΌλ³„ AES ν‚¤ λ„μ¶:**  
   - `AES_KEY = HMAC-SHA256(modernKey, data_random)`
4. **IV(μ΄κΈ°ν™” λ²΅ν„°) μƒμ„±:**  
   - 16λ°”μ΄νΈ, μ• 12λ°”μ΄νΈλ” 0, λ§μ§€λ§‰ 4λ°”μ΄νΈλ” (offset//16) κ°’μ„ big-endian(4λ°”μ΄νΈ)λ΅ ν‘ν„  
   - μΌλ°μ μΌλ΅ offset=0
5. **AES-CTR λ³µνΈν™”:**  
   - μ„μ—μ„ λ„μ¶ν• ν‚¤μ™€ IVλ΅ .mms νμΌ μ „μ²΄ λ³µνΈν™”  
   - κ²°κ³Ό: μ›λ³Έ μ΄λ―Έμ§€/λ™μμƒ/λ¬Έμ„ νμΌ

---

## π“¦ ν΄λ” κµ¬μ΅°

```
.
β”β”€β”€ README.md
β”β”€β”€ main.py
β”β”€β”€ input_mms/          # λ³µνΈν™”ν•  .mms νμΌ μ €μ¥ ν΄λ”
β””β”€β”€ decrypted_files/    # λ³µνΈν™” κ²°κ³Όλ¬Όμ΄ μ €μ¥λλ” ν΄λ”
```

---

## β™οΈ μ„¤μΉ λ° μ‚¬μ© λ°©λ²•

### 1. ν•„μ ν¨ν‚¤μ§€ μ„¤μΉ

```bash
pip install pycryptodome tqdm
```

### 2. νμΌ λ° ν‚¤ μ •λ³΄ μ¤€λΉ„

- `input_mms/` ν΄λ”μ— .mms νμΌ λ³µμ‚¬
- κ° νμΌμ `data_random`(HEX λ¬Έμμ—΄) λ° `modernKey`(Base64 λ¬Έμμ—΄) ν™•λ³΄  
  (μ¶”μ¶λ²•μ€ μ•„λ μ°Έκ³ μλ£ μ°Έμ΅°)

### 3. `main.py` μƒλ‹¨μ μ„¤μ •κ°’ μ…λ ¥

- modernKey(Base64 λ¬Έμμ—΄) μ…λ ¥
- λ³µνΈν™” λ€μƒ νμΌλ… : data_random(hex) λ”•μ…”λ„λ¦¬(μμ‹ ν¬ν•¨) μ…λ ¥

### 4. λ³µνΈν™” μ‹¤ν–‰

```bash
python main.py
```

- μ„±κ³µ μ‹ `decrypted_files/` ν΄λ”μ— λ³µνΈν™”λ μ›λ³Έ νμΌμ΄ μλ™ μ €μ¥λ©λ‹λ‹¤  
  (νμΌ ν™•μ¥μλ„ μλ™ νλ³„)

---

## π“ main.py μ„¤μ • μμ‹

```python
modern_key_base64 = "μ—¬κΈ°μ—_modernKey_κ°’_μ…λ ¥"
target_files = {
    "part1234.mms": "μ—¬κΈ°μ—_data_random_κ°’_μ…λ ¥",
    "part5678.mms": "μ—¬κΈ°μ—_data_random_κ°’_μ…λ ¥",
    # ... λ³µνΈν™”ν•  νμΌλ…κ³Ό data_random κ°’ μ¶”κ°€ ...
}
```

---

## β οΈ μ£Όμμ‚¬ν•­

- μ΄ μ¤ν¬λ¦½νΈλ” modernKeyμ™€ data_random κ°’μ΄ λ°λ“μ‹ ν•„μ”ν•©λ‹λ‹¤  
  (μ•±μ μ„¤μ •νμΌ, DB λ“±μ—μ„ μ§μ ‘ μ¶”μ¶ν•΄μ•Ό ν•¨)
- λ³µνΈν™” λ€μƒ νμΌλ…κ³Ό data_random κ°’μ΄ μ •ν™•ν λ§¤μΉ­λμ–΄μ•Ό ν•©λ‹λ‹¤
- ν•©λ²•μ , μ—°κµ¬/κµμ΅/μ •λ‹Ήν• ν¬λ μ‹ λ©μ μΌλ΅λ§ μ‚¬μ©ν•μ„Έμ”  
  (λΉ„μΈκ°€ κ°μΈμ •λ³΄ ν•΄λ…, λ¶λ²• ν•΄ν‚Ή λ©μ  μ‚¬μ© κΈμ§€)
- μ΄ μ½”λ“λ” ν‚¤λ¥Ό ν¬λν‚Ήν•κ±°λ‚ μ¶”μ¶ν•μ§€ μ•μµλ‹λ‹¤

---

## π“ μ°Έκ³ μλ£

- [Signal κ³µμ‹ μ¤ν”μ†μ¤](https://github.com/signalapp/Signal-Android)
- [Session Android λ¦¬ν¬](https://github.com/session-research/session-android)
- The Binary Hick:  
  [Session on Android β€“ An app wrapped in Signal](https://thebinaryhick.blog/2022/07/14/session-on-android-an-app-wrapped-in-signal/)
- λ…Όλ¬Έ/μ—°κµ¬μλ£:
  - κ¶μ¬λ―Ό, λ°•μ›ν•, μµμ¤μ„±. (2023). μ•λ“λ΅μ΄λ“ ν™κ²½μ—μ„ Signalκ³Ό Telegram λ³΄μ• λ©”μ‹ μ € λ””μ§€ν„Έ ν¬λ μ‹λ¶„μ„ μ—°κµ¬.
  - λ°•μ§„μ² , λ°•μ„Έμ¤€, κΉ€κ°•ν•. (μ—°λ„ λ―Έμƒ). λ³΄μ• μΈμ¤ν„΄νΈ λ©”μ‹ μ € Session μ„μ‹νμΌ λ³µνΈν™” λ°©μ• [ν¬μ¤ν„°].

---

## π‘¤ λΌμ΄μ„ μ¤ λ° λ¬Έμ

- μ‘μ„±μ: (μ—¬λ¬λ¶„/ν€λ…)
- λΌμ΄μ„ μ¤: MIT λλ” μμ λ΅­κ² μ„ νƒ
- λ¬Έμ: github issues ν™μ©

---
